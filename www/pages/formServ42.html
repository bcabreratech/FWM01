<style>
    .text-divided-check{
     margin-top: 0px;
     font-size: 14px;
     }
     .sheet-modal.modal-in{
         height: 80%;
         z-index: 9999;
     }
     .text-check{
         font-size: 15px;
         line-height: 22px;
     }
     .select-check {
         font-size: 14px !important;
         line-height: 40px;
     }
     .multiple-input-divided-check {
         font-size: 14px !important;
         line-height: 40px;
     }
     .label_medio{
        font-size: 16px;font-family: 'ITC Avant Garde Gothic', sans-serif;
        font-weight: bold;
        color: gray;
        margin: auto;
        width: 50%;
        text-align: left;
        margin-left: 15px;
     }
     .label_uno{
        font-size: 16px;font-family: 'ITC Avant Garde Gothic', sans-serif;
        font-weight: bold;
        color: #000;
        margin: auto;
     }
     .b_tipo{
        margin-top: 10px;margin-left: 9px; color: #000;
     }
     .p_marcar{
        font-size: 15px;
        margin-bottom: 0;
        padding-top: 0px;
        margin-top: 10px;
        margin-left: 15px;
     }
     input[type="checkbox"] {
        transform: scale(1.3);
        margin-right: 10px;
     }
     .labelsino{
        font-size: 16px;font-family: 'ITC Avant Garde Gothic', sans-serif;font-weight: bold;color: #000;
     }
 </style>
 <template>
     <div class="view view-main view-init safe-areas">
         <div class="page" id="FWM-1">
             <!-- Navbar -->
             <div class="navbar" style="background-color: #063E7F;height: 52px;">
                 <div style="text-align: center;"><img src="img/logo-FWM.png" style="margin-top: 5px;" height="41.38px" alt="Logo Field"></div>
                 <div class="navbar-inner sliding" style="height: 52px;">
                     <div class="left">
                         <a href="#" onclick="regresarRecorridoServInd2();">
                             <span class="nav-text-regresar" id="nav-text-regresar-function">Regresar</span>
                         </a>
                     </div>
                 </div>
             </div>
             <!-- Contenido Formulario -->                                
             <div class="page-content">
  
                 <div style="text-align: center; justify-content:center; margin-right:auto; margin-left:auto; width: 99%;margin-top: 30px;">
                     <h2 class="FWN-titulo-2">Revisión de Sistema de Calentamiento</h2>
                     <div style="text-align: left;">    
                         <form class="list FWM-fixing-form">
                             <div class="container-check" style="margin-top: 13px;">
                                 <span class="span FWM-span-form text-check"><b style="color: #000;">1. ¿Cliente cuenta con lavaloza?</b></span>
                             </div>
                             <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;">
                                 <label class="labelsino"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                 <label class="labelsino"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                             </div>
                             <div class="container-check" style="margin-top: 13px;">
                                 <span class="span FWM-span-form text-check" style="width: 60%;"><p class="p_marcar">Marca: </p></span>
                                 <select id="2-1-select" name="Punto-10" style="width: 100% !important; padding-left: 10px;" class="select-check" onchange="//checkSelect(this.value,this.id); guardarSelectServ(this.id);">
                                     <option value="0">Selecciona una marca</option>
                                     <option value="1">Winterhalter</option>
                                     <option value="2">Meiko</option>
                                     <option value="3">Hobart</option>
                                     <option value="4">Classeq</option>
                                     <option value="5">Otro</option>
                                 </select>
                             </div>
                             <div class="container-check" style="margin-top: 13px;">
                                <span class="span FWM-span-form text-check"><b style="margin-top: 5px;margin-left: 15px;">Tipo: </b></span>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Bajo mostrador</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Capota</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Tren compacto</label>
                            </div>
 
                             <div class="container-check" style="margin-top: 25px;">
                                 <span class="span FWM-span-form text-check"><b style="color: #000;">2. ¿Cliente cuenta con Horno Combi?</b></span>
                             </div>
                             <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;">
                                <label class="labelsino"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                <label class="labelsino"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <span class="span FWM-span-form text-check" style="width: 60%;"><p class="p_marcar">Marca: </p></span>
                                <select id="2-1-select" name="Punto-10" style="width: 100% !important;padding-left: 10px;" class="select-check" onchange="//checkSelect(this.value,this.id); guardarSelectServ(this.id);">
                                    <option value="0">Selecciona una marca</option>
                                    <option value="1">Rational</option>
                                    <option value="2">Unox</option>
                                    <option value="3">Comvorther</option>
                                    <option value="4">Otro</option>
                                </select>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                               <span class="span FWM-span-form text-check"><b style="margin-top: 5px;margin-left: 15px;">Tipo: </b></span>
                           </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Mesa</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Piso</label>
                            </div>
 
                             <div class="container-check" style="margin-top: 25px;">
                                 <span class="span FWM-span-form text-check"><b style="color: #000;">3. Cliente tiene necesidad de Mantenimiento Preventivo.</b></span>
                             </div>
                             <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;">
                                <label class="labelsino"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                <label class="labelsino"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <span class="span FWM-span-form text-check" style="width: 60%;"><p class="p_marcar">Tipo de Equipo: </p></span>
                                <input type="text" id="tipo3" class="FWM-input" onchange="inputLleno(this.id,this.value)"/>
                            </div> 
                            <div class="container-check" style="margin-top: 13px;">
                                <span class="span FWM-span-form text-check" style="width: 60%;"><p class="p_marcar">Marca: </p></span>
                                <input type="text" id="marca3" class="FWM-input" onchange="inputLleno(this.id,this.value)"/>
                            </div>
                             <div class="container-check" style="margin-top: 25px;">
                                 <span class="span FWM-span-form text-check"><b style="color: #000;">4. Cuenta con al menos 1 de los siguientes equipos.</b></span>
                             </div>
                            <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;margin-top: 20px;">
                                <span class="span FWM-span-form text-check" style="width: 40%;padding: 0px;"><b class="b_tipo">Cafetera: </b></span>
                                <label class="label_uno"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                <label class="label_uno"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Bunn</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Cecilware</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Otro</label>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;margin-top: 20px;">
                                <span class="span FWM-span-form text-check" style="width: 40%;padding: 0px;"><b class="b_tipo">Refrigerador: </b></span>
                                <label class="label_uno"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                <label class="label_uno"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >True</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Delfield</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Trauslen</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Otro</label>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;margin-top: 20px;">
                                <span class="span FWM-span-form text-check" style="width: 40%;padding: 0px;"><b class="b_tipo">Granita: </b></span>
                                <label class="label_uno" ><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                <label class="label_uno"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Bunn</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Cecilware</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Otro</label>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-bottom: 10px;margin-top: 0px;margin-top: 20px;">
                                <span class="span FWM-span-form text-check" style="width: 40%;padding: 0px;"><b class="b_tipo">Máquina de Hielo: </b></span>
                                <label class="label_uno"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Si</label>
                                <label class="label_uno"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >No</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-1" onclick="//checkAndSave(this.id,this.value,'3')" value="1" >Manitowoc</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Hoshizaki</label>
                            </div>
                            <div class="container-check" style="margin-top: 13px;">
                                <label class="label_medio" style="padding-left: 15px;"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Ice o Matic</label>
                                <label class="label_medio"><input type="checkbox" id="filtro-2" onclick="//checkAndSave(this.id,this.value,'3')" value="2" >Otro</label>
                            </div>
                            <span class="span FWM-span-form">Foto:</span>
                         </form>
                         
                         <div class="FWM-photo-container">
                            <div class="border-capture">
                                <a onclick="capturePhoto();">
                                    <img class="FWM-photo" src="img/camera.svg" id="photoIcon" width="45px" style="margin-left: 50px;"/>
                                </a>
                            </div>
                            <img class="FWM-photo-hide" id="smallImage" src=""/>
                            <input type="hidden" id="imagenC" name="imagenC"/>
                        </div>

                        <div class="block grid-resizable-demo" style="margin-bottom: 20px;">
                            <div class="row align-items-stretch" style="text-align: center;">
                                <div class="col-100 medium-50" style="min-width: 50px; border-style: none;">
                                    <span class="resize-handler"></span>
                                    <a href="#" class="boton-equipo">Guardar Registro</a>
                                </div>
                            </div>
                        </div>

                         <div class="block-title FWM-subtitulo" style="color: #000;">Evidencias de área de cocina:</div>  
                         
                             <div class="card data-table">
                                 <div class="infinite-scroll-content">
                                     <table>
                                         <thead>
                                             <tr>
                                                 <th class="numeric-cell" style="text-align: center;background-color: #063E7F;color: white;">Accion</th>
                                                 <th class="numeric-cell" style="text-align: center;background-color: #063E7F;color: white;">Foto</th>
                                                 <th class="numeric-cell" style="text-align: center;background-color: #063E7F;color: white;">Fecha</th>
                                             </tr>
                                         </thead>
                                         <tbody id="tabla_calentamiento"></tbody>
                                     </table>
                                     <div class="sentencia preloader color-grey infinite-scroll-preloader"></div>
                                     <div id="message-nr" style="width: 100%;text-align: center;font-family: 'ITC Avant Garde Gothic', sans-serif;font-size: 16px;" style="display: none;">
                                         <p>Sin registros</p>
                                     </div>
                                 </div>
                             </div>
                             
                     </div>
 
                 <div style="display: flex;flex-direction: row;justify-content: space-between; margin-top: 80px; margin-bottom: 20px;">
                     <button class="btn-next" onclick="app.views.main.router.back('/formServ2/', {force: true, ignoreCache: true, reload: true});">Anterior</button>
                     <a href="#" class="buble-float link popover-open" data-popover=".popover-links" style="background:cadetblue; width: 20%;">
                         <i class="material-icons md-light" style="color: #ffffff;font-size: 35px;">book</i>
                     </a>
                     <button class="btn-next" onclick="guardarSuministrosServind(9,2);">Siguiente</button>
                     <!--<button class="btn-next" onclick="app.views.main.router.back('/formServ4/', {force: true, ignoreCache: true, reload: true});">Siguiente</button>-->
                 </div>
 
                 <div class="popover popover-links">
                     <div class="popover-inner">
                         <div class="list">
                         <ul>
                             <li><a class="list-button item-link popover-close" onclick="showTPM()">TPM</a></li>
                             <li><a class="list-button item-link popover-close" onclick="showManual()">Manual</a></li>
                         </ul>
                         </div>
                     </div>
                 </div>
             </div>
                 <!-- Fin contenido formulario -->
                 <fwm></fwm>
             </div>
         </div>
     </div>
 </template>
 <script>
     return {
         on: {
             pageInit: function (e, page) {
                 $('.preloader').remove();
                 $('.infinite-scroll-preloader').remove();
 
                 var id_cedula = localStorage.getItem("IdCedula");
                 var id;
                 var tipoVisita = localStorage.getItem("TipoVisita");
                 var id_equipo = localStorage.getItem("insertId");
 
                 if(tipoVisita == 'PMP2'){
                     databaseHandler.db.transaction(
                     function(tx){
                         tx.executeSql(
                             "Select pregunta,valor,tipo from checklist_servind WHERE id_equipo = ? AND fase = '2'",
                             [id_equipo],
                             function(tx, results){
                                 let length = results.rows.length;
                                 for(var i = 0; i< length; i++){
                                     var item = results.rows.item(i);
                                     $("#2-"+item.pregunta+"-"+item.tipo).val(item.valor);
                                     id="2-"+item.pregunta+"-"+item.tipo;
                                     //console.log(id);
                                     if (item.tipo=='select'){
                                         if(item.valor==1){
                                             document.getElementById(id).style.setProperty('background-color', '#2BEB00', 'important');
                                             document.getElementById(id).style.setProperty('color', '#212121', 'important');
                                         }else if(item.valor==2){
                                             document.getElementById(id).style.setProperty('background-color', 'yellow', 'important');
                                             document.getElementById(id).style.setProperty('color', '#212121', 'important');
                                         }else if(item.valor==3){
                                             document.getElementById(id).style.setProperty('background-color', 'red', 'important');
                                             document.getElementById(id).style.setProperty('color', 'white', 'important');
                                         }else if(item.valor==4){
                                             document.getElementById(id).style.setProperty('background-color', 'gray', 'important');
                                             document.getElementById(id).style.setProperty('color', 'white', 'important');
                                         }else if(item.valor==5){
                                             document.getElementById(id).style.setProperty('background-color', '#EAEAEA', 'important');
                                             document.getElementById(id).style.setProperty('color', '#212121', 'important');
                                         }
                                     }else{}
                                 } 
                             },
                             function(tx, error){
                                 console.log("Error al guardar cedula: " + error.message);
                                 app.preloader.hide();  
                             }
                         );  
                     },
                     function(error){},
                     function(){}
                 );
 
                 databaseHandler.db.transaction(
                     function(tx){
                         tx.executeSql("Select * from fotos_check where id_equipo = ? AND fase = 2 ORDER BY id_foto ASC",
                         [id_equipo],
                             function(tx, results){
                                 let length = results.rows.length;
                             for(var i = 0; i< length; i++){
                                 var item = results.rows.item(i);
                                 //console.log(item.id_cedula);
                                 $("#tabla_calentamiento").append("<tr id='fila"+ item.id_foto +"'><td id='tdaccion'><a href='#' onclick='eliminarFilaServ("+ item.id_foto +",1);' style='border: none; outline:none;'><img src='img/borrar.png' width='30px' /></a></td><td><img src='"+item.foto+"' width='60px' style='margin-top: 4px;'/></td><td style='text-align: center;'>" + item.no_pregunta + "</td><td id='tdaccion'><a href='#' onclick='eliminarFilaServ("+ item.id_foto +",1);' style='border: none; outline:none;'><img src='img/borrar.png' width='30px' /></a></td><td><img src='"+item.foto+"' width='60px' style='margin-top: 4px;'/></td><td style='text-align: center;'>" + item.observaciones + "</td><td style='text-align: center;'>" + item.fecha_foto + "</td></tr>");
                                 $("#message-nr").css("display", "none");
                                 $('.preloader').remove();
                                 $('.infinite-scroll-preloader').remove();
                                 app.preloader.hide();
                             }
                             },
                             function(tx, error){
                                 console.log("Error al guardar cedula: " + error.message);
                                 app.preloader.hide();
                             }
                         );
                     },
                     function(error){console.log("Error al guardar cedula: " + error.message);},
                     function(){}
                 );
             }else{
                 databaseHandler.db.transaction(
                     function(tx){
                         tx.executeSql(
                             "Select pregunta,valor,tipo from checklist_servind WHERE id_cedula = ? AND fase = '2'",
                             [id_cedula],
                             function(tx, results){
                                 let length = results.rows.length;
                                 for(var i = 0; i< length; i++){
                                     var item = results.rows.item(i);
                                     $("#2-"+item.pregunta+"-"+item.tipo).val(item.valor);
                                     id="2-"+item.pregunta+"-"+item.tipo;
                                     //console.log(id);
                                     if (item.tipo=='select'){
                                         if(item.valor==1){
                                             document.getElementById(id).style.setProperty('background-color', '#2BEB00', 'important');
                                             document.getElementById(id).style.setProperty('color', '#212121', 'important');
                                         }else if(item.valor==2){
                                             document.getElementById(id).style.setProperty('background-color', 'yellow', 'important');
                                             document.getElementById(id).style.setProperty('color', '#212121', 'important');
                                         }else if(item.valor==3){
                                             document.getElementById(id).style.setProperty('background-color', 'red', 'important');
                                             document.getElementById(id).style.setProperty('color', 'white', 'important');
                                         }else if(item.valor==4){
                                             document.getElementById(id).style.setProperty('background-color', 'gray', 'important');
                                             document.getElementById(id).style.setProperty('color', 'white', 'important');
                                         }else if(item.valor==5){
                                             document.getElementById(id).style.setProperty('background-color', '#EAEAEA', 'important');
                                             document.getElementById(id).style.setProperty('color', '#212121', 'important');
                                         }
                                     }else{}
                                 } 
                             },
                             function(tx, error){
                                 console.log("Error al guardar cedula: " + error.message);
                                 app.preloader.hide();  
                             }
                         );  
                     },
                     function(error){},
                     function(){}
                 );
 
                 databaseHandler.db.transaction(
                     function(tx){
                         tx.executeSql("Select * from fotos_check where id_cedula = ? AND fase = 2 ORDER BY id_foto ASC",
                         [id_cedula],
                             function(tx, results){
                                 let length = results.rows.length;
                             for(var i = 0; i< length; i++){
                                 var item = results.rows.item(i);
                                 //console.log(item.id_cedula);
                                 $("#tabla_calentamiento").append("<tr id='fila"+ item.id_foto +"'><td id='tdaccion'><a href='#' onclick='eliminarFilaServ("+ item.id_foto +",1);' style='border: none; outline:none;'><img src='img/borrar.png' width='30px' /></a></td><td><img src='"+item.foto+"' width='60px' style='margin-top: 4px;'/></td><td style='text-align: center;'>" + item.no_pregunta + "</td><td id='tdaccion'><a href='#' onclick='eliminarFilaServ("+ item.id_foto +",1);' style='border: none; outline:none;'><img src='img/borrar.png' width='30px' /></a></td><td><img src='"+item.foto+"' width='60px' style='margin-top: 4px;'/></td><td style='text-align: center;'>" + item.observaciones + "</td><td style='text-align: center;'>" + item.fecha_foto + "</td></tr>");
                                 $("#message-nr").css("display", "none");
                                 $('.preloader').remove();
                                 $('.infinite-scroll-preloader').remove();
                                 app.preloader.hide();
                             }
                             },
                             function(tx, error){
                                 console.log("Error al guardar cedula: " + error.message);
                                 app.preloader.hide();
                             }
                         );
                     },
                     function(error){console.log("Error al guardar cedula: " + error.message);},
                     function(){}
                 );
             }
             }
         }  
     }
 </script>