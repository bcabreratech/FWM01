<template>
    <div class="page">
        <div class="navbar" style="background-color: #063E7F;height: 52px;">
            <div style="text-align: center;"><img src="img/logo-FWM.png" style="margin-top: 5px;" height="41.38px" alt="Logo Field"></div>
            <div class="navbar-inner sliding" style="height: 52px;">
                <div class="left">
                    <style>
                        .nav-text-regresar{
                            color: #ffffff;
                            border: 2px solid white;
                            padding: 0 10px;
                            border-radius: 7px;
                            font-size: 14px;
                        }
                    </style>
                    <a href="#" class="link back" onclick="regresar();" style="margin-left: 5px;">
                        <span class="nav-text-regresar">Regresar</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="page-content">
            <div id="nointernet-page" style="display:none;text-align: center; justify-content:center; margin-right:auto; margin-left:auto; width: 99%;">
                <img src="img/nosignal.svg" width="60%" style="margin-top: 140px;">
                <div style="text-align: left;">
                    <h2 style="margin: 50px 0 0 15px;text-align: left;"><b>¡VAYA!</b></h2>
                    <h2 style="margin: 0 0 0 15px;text-align: left;"><b>No tienes internet.</b></h2>
                    <h4 style="margin: 0 0 0 15px;text-align: left;">Para realizar esta consulta es necesario tener una conexion.</h>
                </div>
            </div>
            <div id="content-page" style="text-align: center; justify-content:center; margin-right:auto; margin-left:auto; width: 99%;">
                <br>
                <h2 style="color:#00A7B5;font-family: 'ITC Avant Garde Gothic';font-size: 24px;margin-top: 27px;">Tracking documental</h2>
                <!-- Tabla de mes y año -->
                <table id="maac" align="center" style="width:94%;">
                  <tr>
                    <td style="color: #00A7B5; width:40%;">Estatus del servicio:</td>
                    <td style="width:60%;">
                        <select name="month" id="month">
                          <option value="">Seleccione una opcion...</option>
                          <option value="1">Anticipo (20%)</option>
                          <option value="2">Estimación (30%)</option>
                          <option value="3">Prefiniquito (30%)</option>
                          <option value="4">Finiquito (20%)</option>
                        </select>
                    </td>
                  </tr>
                </table>

                <div class="page-content infinite-scroll-content infinite-scroll-top" style="padding: 0;">
                    <style type="text/css">
                        #encabezado1{background-color: #063E7F;font-family: 'ITC Avant Garde Gothic';font-size: 13px;color: white; font-weight: bold;}
                        #encabezado2{font-weight: bold;}
                        #encabezado3{background-color: #063E7F;font-family: 'ITC Avant Garde Gothic';font-size: 13px;   color: white; font-weight: bold;}
                        #encabezado4{background-color: #063E7F;font-family: 'ITC Avant Garde Gothic';font-size: 13px;color: white; font-weight: bold;}
                        .rowing-content{
                            width: 50%;
                            white-space: none !important;
                            flex-shrink: 0;
                            display: flex;
                            font-size: var(--f7-list-item-after-font-size);
                            font-weight: var(--f7-list-item-after-font-weight);
                            color: var(--f7-list-item-after-text-color);
                            line-height: var(--f7-list-item-after-line-height);
                            margin-left: 10px;
                            text-align: left
                        }
                    </style>
                    <div class="list sortable">
                        <ul id="rutas">
                            <li>
                                <div id="encabezado1" class='item-content'>
                                    <div class='item-inner'>
                                        <div id="encabezado2" class='item-title' style="font-size: 14px;">Cliente</div>
                                        <div id="encabezado3" class='item-after' style="font-size: 14px;">Porcentaje de avance global</div>
                                    </div>
                                </div>
                            </li>
                            <li style='background-color:#F1F1F1'>
                                <div class='item-content' style='padding:0;'>
                                    <div class='item-inner'>
                                        <div class='rowing-content'>
                                            <strong style='font-size:12px;'>
                                                <a>TELCEL JALISCO</a>
                                            </strong>
                                        </div>
                                        <div class='item-after' style='height: 100%;width: 50%;padding: 0;margin: 0;'>
                                            <div class="progress" style="width: 100%;background-color: #64646480;display: flex;align-self: center;border-radius: 10px;">
                                                <div id="barra-global" class="progress-bar" role="progressbar" style="width: 25%;color: white;background-color: #00A7B5;height: 100%;padding-top: 5px;border-radius: 10px 0px 0px 10px;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <style>
                                .step-progress {
                                    position: relative;
                                    padding-left: 45px;
                                    list-style: none;
                                }
                                .step-progress::before {
                                    display: inline-block;
                                    content: '';
                                    position: absolute;
                                    top: 0;
                                    left: 24px;
                                    width: 10px;
                                    height: 100%;
                                    border-left: 2px solid #ccc;
                                }
                                .step-progress-item {
                                    position: relative;
                                    counter-increment: list;
                                    padding-top: 10px;
                                    padding-left: 15px;
                                }
                                .step-progress-item:not(:last-child) {
                                    padding-bottom: 50px;
                                }
                                .step-progress-item::before {
                                    display: inline-block;
                                    content: '';
                                    position: absolute;
                                    left: -21px;
                                    height: 100%;
                                    width: 10px;
                                }
                                .step-progress-item::after {
                                    content: '';
                                    display: inline-block;
                                    position: absolute;
                                    top: 0;
                                    left: -38px;
                                    width: 32px;
                                    height: 32px;
                                    border: 2px solid #ccc;
                                    border-radius: 50%;
                                    background-color: #fff;
                                }
                                .step-progress-item.is-done::before {
                                    border-left: 2px solid #115498;
                                }
                                .step-progress-item.is-done::after {
                                    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNC4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2ZpbGw6I0ZDRkNGQzt9DQo8L3N0eWxlPg0KPGcgaWQ9ImNoZWNrLTMyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAuMDAwMDAwLCA0NS4wMDAwMDApIj4NCgk8ZyBpZD0iY2hlY2stMzItY3JvcCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy4wMDAwMDAsIDkuMDAwMDAwKSI+DQoJCTxwb2x5Z29uIGlkPSJQYWdlLTEiIGNsYXNzPSJzdDAiIHBvaW50cz0iLTEwMi43LC00NC40IC0xMTMuMSwtMzQgLTExOC40LC0zOS4zIC0xMTkuOSwtMzcuOSAtMTEzLjEsLTMxLjIgLTEwMS4zLC00MyAJCSIvPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K);
                                    font-size: 20px;
                                    color: #fff;
                                    text-align: center;
                                    border: 2px solid#115498;
                                    background-color: #115498;
                                }

                                .step-progress-item.current::before {
                                    border-left: 2px solid #d5d834;
                                }
                                .step-progress-item.current::after {
                                    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNC4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iaWNvbi1nZWFyLTMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiDQoJIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4My43IDQ5My4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODMuNyA0OTMuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPGc+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTI0MS45LDI4OS42Yy0yMS45LDAtMzkuNi0xNy44LTM5LjYtMzkuN2MwLTIxLjksMTcuOC0zOS42LDM5LjYtMzkuNnMzOS42LDE3LjgsMzkuNiwzOS42DQoJCUMyODEuNSwyNzEuOCwyNjMuOCwyODkuNiwyNDEuOSwyODkuNiBNMjQxLjksMTczLjFjLTQyLjQsMC03Ni44LDM0LjQtNzYuOCw3Ni44YzAsNDIuNCwzNC40LDc2LjgsNzYuOCw3Ni44DQoJCWM0Mi40LDAsNzYuOC0zNC40LDc2LjgtNzYuOEMzMTguNywyMDcuNSwyODQuMywxNzMuMSwyNDEuOSwxNzMuMSIvPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zODYuNywyOTQuN2MtNy43LDIwLjItMTguOCwzOS0zMi44LDU1LjVsLTguNSwxMGwyNy44LDQ4bC01OCwzMy45bC0yOC00OC4zbC0xMy4zLDMNCgkJYy0xMC41LDIuNS0yMS4yLDMuNy0zMiwzLjdjLTEwLjYsMC4xLTIxLjItMS4xLTMxLjUtMy42bC0xMy42LTMuNGwtMjguMiw0OC42bC01OC0zMy45bDI4LjEtNDguNmwtOS4zLTEwDQoJCWMtMTYuMS0xNy41LTI2LjItMzQuNS0zMS45LTUzLjZsLTMuOS0xMy40SDM3LjJ2LTY2LjhoNTUuM2w0LjUtMTIuMWM3LjctMjAuMiwxOC44LTM5LDMyLjgtNTUuNWw4LjQtMTBsLTI3LjgtNDhsNTgtMzMuOWwyOCw0OC4zDQoJCWwxMy4zLTNjMTAuNS0yLjUsMjEuMi0zLjcsMzItMy43YzExLjIsMCwyMi4xLDEuMywzMS41LDMuNkwyODcsMTA1bDI4LjEtNDguN2w1OCwzMy45bC0yOC4xLDQ4LjVsOS4zLDEwDQoJCWMxNi4xLDE3LjUsMjYuMiwzNC41LDMxLjgsNTMuN2wzLjksMTMuNGg1Ni40djY2LjhoLTU1LjNMMzg2LjcsMjk0LjdMMzg2LjcsMjk0Ljd6IE00ODMuNywzMTkuOVYxNzguN2gtNjYuNA0KCQljLTYuNS0xNi4yLTE1LjQtMzEuMi0yNi42LTQ0LjZsMzMuMS01Ny4yTDMwMS43LDUuNGwtMzMuMiw1Ny40Yy0xNy42LTIuNi0zNS42LTIuNi01My4yLDAuMUwxODIsNS4zTDU5LjgsNzYuOWwzMy40LDU3LjcNCgkJYy0xMC4zLDEzLjctMTksMjguNS0yNiw0NC4xSDB2MTQxLjJoNjYuM2M2LjUsMTYuMiwxNS40LDMxLjIsMjYuNiw0NC42bC0zMy4xLDU3LjJMMTgyLDQ5My4ybDMzLjItNTcuNA0KCQljMTcuNiwyLjcsMzUuNiwyLjYsNTMuMi0wLjFsMzMuMyw1Ny41bDEyMi4zLTcxLjVsLTMzLjQtNTcuOGMxMC4zLTEzLjgsMTkuMi0yOC43LDI2LTQ0LjFMNDgzLjcsMzE5LjlMNDgzLjcsMzE5Ljl6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==);
                                    background-size: 24px 24px;
                                    background-repeat: no-repeat;
                                    background-position: center;
                                    width: 32px;
                                    height: 32px;
                                    top: 0;
                                    left: -38px;
                                    font-size: 14px;
                                    text-align: center;
                                    color: #00417b;
                                    border: 2px solid#d5d834;
                                    background-color: #d5d834;
                                }
                                
                                .step-progress-item.dont::after {
                                    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNC4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iaWNvbi1nZWFyLTMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiDQoJIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4My43IDQ5My4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODMuNyA0OTMuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yLjIsMjQ5LjVDMi4yLDM4MSwxMDksNDg3LjgsMjQwLjUsNDg3LjhTNDc4LjcsMzgxLDQ3OC43LDI0OS41YzAtNjUuMy0yNi41LTEyNS4xLTY5LjQtMTY4bC0yNy44LTI0LjINCgkJCWMtMzQuNy0yNS42LTc2LjItNDEuNS0xMjEuOS00NS4yaC0zNy40Qzk5LDIxLjgsMi4yLDEyNC41LDIuMiwyNDkuNXogTTI0MC41LDQ4LjdjMTEwLjksMCwyMDEuMyw5MC40LDIwMS4zLDIwMS4zDQoJCQlzLTkwLjQsMjAxLjMtMjAxLjMsMjAxLjNTMzkuMiwzNjAuOSwzOS4yLDI1MEMzOS4yLDEzOC42LDEyOS41LDQ4LjcsMjQwLjUsNDguN3oiLz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTI0MC41LDI2NS4xaDc5LjljMTAuNSwwLDE4LjctOC4yLDE4LjctMTguN2MwLTEwLjUtOC4yLTE4LjctMTguNy0xOC43aC02MS4ydi05Ni4zDQoJCQljMC0xMC41LTguMi0xOC43LTE4LjctMTguN2MtMTAuNSwwLTE4LjcsOC4yLTE4LjcsMTguN3YxMTUuNUMyMjEuNywyNTYuOCwyMzAsMjY1LjEsMjQwLjUsMjY1LjF6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);
                                    background-size: 24px 24px;
                                    background-repeat: no-repeat;
                                    background-position: center;
                                    width: 32px;
                                    height: 32px;
                                    top: 0;
                                    left: -38px;
                                    font-size: 14px;
                                    text-align: center;
                                    color: #00417b;
                                    border: 2px solid #dc3545;
                                    background-color: #dc3545;
                                }
                                
                                .step-progress-item.dont::before {
                                    border-left: 2px solid #dc3545;
                                }
                                
                                .last.step-progress-item.dont::before {
                                    border-left: 0;
                                }
                                .step-progress strong {
                                    display: block;
                                }
                            </style>
                            <li style='background-color:#F1F1F1'>
                                <div class='item-content' style='padding:0;'>
                                    <div class="wrapper" style="width: 100%;">
                                        <ul class="step-progress" style="background-color: #F1F1F1;">
                                            <li class="step-progress-item is-done" id="etapa1" onclick="tracking1();"><strong>20%</strong>Anticipo</li>
                                            <li class="step-progress-item is-done" id="etapa2" onclick="tracking2();"><strong>30%</strong>Estimación</li>
                                            <li class="step-progress-item current" id="etapa3" onclick="tracking3();"><strong>30%</strong>Prefiniquito</li>
                                            <li class="last step-progress-item dont" id="etapa4" style="padding-bottom: 20px;" onclick="tracking4();"><strong>20%</strong>Finiquito</li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="preloader2"></div>
                </div>
        </div>
    </div>
</template>
<script>
    return {
        on: {
            pageInit: function (e, page) {
                app.request.get('https://www.fwm.com.mx/app/trackingDocumentalMer.php', function (data) {
                    var content = JSON.parse(data);
                    if(!data || data == "null"){
                        $('#TotalC').append(0);
                        $('#RelizadasC').append(0);
                        $('#FaltantesC').append(0);
                        $('#rutas').append("<li style='font-size:17px;margin-top:10px'>No hay datos para mostrar</li>");
                        $('.preloader').remove();
                    } else {
                        var totalreg = content.length;
                        var totalreg1 = totalreg - 1;
                        $("#barra-global").css("width",content[totalreg1].progreso+"%");
                        $("#barra-global").text(content[totalreg1].progreso+"%");
                        if(content[totalreg1].etapa1 == 0){
                            $('#etapa1').addClass('dont')
                        } else if(content[totalreg1].etapa1 == 1){
                            $('#etapa1').addClass('current')
                        } else if(content[totalreg1].etapa1 == 2){
                            $('#etapa1').addClass('is-done')
                        }
                        if(content[totalreg1].etapa2 == 0){
                            $('#etapa2').addClass('dont')
                        } else if(content[totalreg1].etapa2 == 1){
                            $('#etapa2').addClass('current')
                        } else if(content[totalreg1].etapa2 == 2){
                            $('#etapa2').addClass('is-done')
                        }
                        if(content[totalreg1].etapa3 == 0){
                            $('#etapa3').addClass('dont')
                        } else if(content[totalreg1].etapa3 == 1){
                            $('#etapa3').addClass('current')
                        } else if(content[totalreg1].etapa3 == 2){
                            $('#etapa3').addClass('is-done')
                        }
                        if(content[totalreg1].etapa4 == 0){
                            $('#etapa4').addClass('dont')
                        } else if(content[totalreg1].etapa4 == 1){
                            $('#etapa4').addClass('current')
                        } else if(content[totalreg1].etapa4 == 2){
                            $('#etapa4').addClass('is-done')
                        }
                        $('.preloader2').remove();
                    }
                },function (xhr) {
                    $('.preloader').remove();
                    $("#content-page").css('display','none');
                    $("#nointernet-page").css('display','block');
                });
            }
        }
    }
</script>
